{"version":3,"sources":["../src/script.js"],"names":["window","IntersectionObserverEntry","prototype","slides","document","querySelectorAll","observer","IntersectionObserver","entries","forEach","entry","slide","target","imgContainer","querySelector","id","getAttribute","intersectionRatio","classList","add","setAttribute","location","hash","remove","history","pushState","title","pathname","search","rootMargin","observe","scrollShow","addEventListener","event","_scrollShow","scrollShowOffsetTop","getBoundingClientRect","top","scrollShowOffsetBottom","bottom","slideMediaEls","innerHeight","slideEl","scrollSlide","style","alignItems","passive"],"mappings":"0BAAA,WACE,GACI,yBAA0BA,QAC1B,8BAA+BA,QAC/B,sBAAuBA,OAAOC,0BAA0BC,UAH5D,CAQA,IAAMC,EAASC,SAASC,iBAAiB,uBAKnCC,EAAW,IAAIC,sBAAqB,SAACC,GACzCA,EAAQC,SAAQ,SAACC,GACf,IAAMC,EAAQD,EAAME,OACdC,EAAeF,EAAMG,cAAc,iCACnCC,EAAKJ,EAAMK,aAAa,MAG1BN,EAAMO,kBAAoB,GAE5BJ,EAAaK,UAAUC,IAAI,QAG3BR,EAAMS,aAAa,KAAM,IACzBpB,OAAOqB,SAASC,KAAO,IAAMP,EAC7BJ,EAAMS,aAAa,KAAML,KAEzBF,EAAaK,UAAUK,OAAO,QAC1BvB,OAAOqB,SAASC,OAAS,IAAMP,GACjCS,QAAQC,UACN,GACArB,SAASsB,MACT1B,OAAOqB,SAASM,SAAW3B,OAAOqB,SAASO,cAzBrC,CACdC,WAAY,uBAgCd1B,EAAOM,SAAQ,SAACE,GAEdL,EAASwB,QAAQnB,OA7CrB,GAgDA,WACE,GACI,yBAA0BX,QAC1B,8BAA+BA,QAC/B,sBAAuBA,OAAOC,0BAA0BC,UAH5D,CAQA,IAAM6B,EAAa3B,SAASC,iBAAiB,mBAC7CD,SAAS4B,iBAAiB,UAC1B,SAAkBC,GAGhBF,EAAWtB,SAAQ,SAACyB,GAClB,IAAMC,EAAsBD,EAAYE,wBAAwBC,IAC1DC,EAAyBJ,EAAYE,wBAAwBG,OAC7DpC,EAAS+B,EAAY7B,iBAAiB,uBACtCmC,EAAgBN,EAAY7B,iBAChC,iCAIA8B,GAXoB,GAYpBG,EAAyBtC,OAAOyC,aAEhCD,EAAc/B,SAAQ,SAACiC,GACrBA,EAAQxB,UAAUC,IAAI,mBAExBhB,EAAOM,SAAQ,SAACkC,GACdA,EAAYC,MAAMC,WAAa,eAExBP,GAA0BtC,OAAOyC,YAC1CD,EAAc/B,SAAQ,SAACiC,GACrBA,EAAQxB,UAAUK,OAAO,oBAG3BiB,EAAc/B,SAAQ,SAAUiC,GAC9BA,EAAQxB,UAAUK,OAAO,mBAE3BpB,EAAOM,SAAQ,SAAUkC,GACvBA,EAAYC,MAAMC,WAAa,YA/BO,CAAEC,SAAS,KAV3D","sourcesContent":["(() => {\n  if (\n    !(\"IntersectionObserver\" in window) ||\n    !(\"IntersectionObserverEntry\" in window) ||\n    !(\"intersectionRatio\" in window.IntersectionObserverEntry.prototype)\n  ) {\n    return;\n  }\n\n  const slides = document.querySelectorAll(\".scroll-show__slide\");\n  const options = {\n    rootMargin: \"0px 0px -300px 0px\",\n  };\n  // スクロール検知\n  const observer = new IntersectionObserver((entries) => {\n    entries.forEach((entry) => {\n      const slide = entry.target;\n      const imgContainer = slide.querySelector(\".scroll-show__image-container\");\n      const id = slide.getAttribute(\"id\");\n\n      // 画面に入ってきたか\n      if (entry.intersectionRatio > 0) {\n        // 画像の表示\n        imgContainer.classList.add(\"show\");\n\n        // url hash 設定\n        slide.setAttribute(\"id\", \"\");\n        window.location.hash = \"#\" + id;\n        slide.setAttribute(\"id\", id);\n      } else {\n        imgContainer.classList.remove(\"show\");\n        if (window.location.hash === \"#\" + id) {\n          history.pushState(\n            \"\",\n            document.title,\n            window.location.pathname + window.location.search\n          );\n        }\n      }\n    });\n  }, options);\n\n  // 各スライド\n  slides.forEach((slide) => {\n    // attach scroll observer to slides\n    observer.observe(slide);\n  });\n})();\n(() => {\n  if (\n    !(\"IntersectionObserver\" in window) ||\n    !(\"IntersectionObserverEntry\" in window) ||\n    !(\"intersectionRatio\" in window.IntersectionObserverEntry.prototype)\n  ) {\n    return;\n  }\n  // 画像の固定\n  const scrollShow = document.querySelectorAll(\".js-scroll-show\");\n  document.addEventListener(\"scroll\", onScroll, { passive: true });\n  function onScroll(event) {\n    const scrollThreshold = 0;\n    const scrollY = window.scrollY;\n    scrollShow.forEach((_scrollShow) => {\n      const scrollShowOffsetTop = _scrollShow.getBoundingClientRect().top;\n      const scrollShowOffsetBottom = _scrollShow.getBoundingClientRect().bottom;\n      const slides = _scrollShow.querySelectorAll(\".scroll-show__slide\");\n      const slideMediaEls = _scrollShow.querySelectorAll(\n        \".scroll-show__image-container\"\n      );\n\n      if (\n        scrollShowOffsetTop <= scrollThreshold &&\n        scrollShowOffsetBottom > window.innerHeight\n      ) {\n        slideMediaEls.forEach((slideEl) => {\n          slideEl.classList.add(\"viewport-fix\");\n        });\n        slides.forEach((scrollSlide) => {\n          scrollSlide.style.alignItems = \"flex-end\";\n        });\n      } else if (scrollShowOffsetBottom <= window.innerHeight) {\n        slideMediaEls.forEach((slideEl) => {\n          slideEl.classList.remove(\"viewport-fix\");\n        });\n      } else {\n        slideMediaEls.forEach(function (slideEl) {\n          slideEl.classList.remove(\"viewport-fix\");\n        });\n        slides.forEach(function (scrollSlide) {\n          scrollSlide.style.alignItems = \"\";\n        });\n      }\n    });\n  }\n})();\n"]}